
@using WebShoeShop.Common
@{
    ViewBag.Title = "Giỏ hàng";
}


<link rel="stylesheet" type="text/css" href="~/Content/assets/styles/categories_styles.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/styles/main_styles.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/styles/categories_responsive.css">
<div class="container product_section_container">
    <div class="row">
        <div class="col product_section clearfix">

            <!-- Breadcrumbs -->

            <div class="breadcrumbs d-flex flex-row align-items-center">
                <ul>
                    <li><a href="~/Home/index">Home</a></li>
                    <li class="active"><a href="/"><i class="fa fa-angle-right" aria-hidden="true"></i>Giỏ hàng</a></li>
                </ul>
            </div>

            <!-- Sidebar -->
            <!-- Main Content -->

            <div class="row">
                <div class="col-md-12" id="load_data">
                    @Html.Action("Partial_Item_Cart", "ShoppingCart")
                </div>
                <div class="col-md-12">
                    @if (ViewBag.CheckCart != null)
                    {
                        <div class="text-right">
                            <a href="#" class="btn btn-danger btnDeleteAll">Xóa</a>
                            <a href="/thanh-toan" class="btn btn-success btnpayment">Thanh toán</a>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Content/assets/js/categories_custom.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const paymentButton = document.querySelector(".btnpayment");

            // Kiểm tra xem phần tử có tồn tại không
            if (paymentButton) {
                paymentButton.addEventListener("click", function (e) {
                    const quantityInputs = document.querySelectorAll('.quantity-input');
                    const sizeInputs = document.querySelectorAll('.size-input');
                    let hasInvalidInput = false;

                    for (let i = 0; i < quantityInputs.length; i++) {
                        const quantityValue = parseInt(quantityInputs[i].value);
                        const sizeValue = parseInt(sizeInputs[i].value);

                        if (quantityValue === 0 || sizeValue === 0 || isNaN(quantityValue) || isNaN(sizeValue)) {
                            hasInvalidInput = true;
                            break;
                        }
                    }

                    if (hasInvalidInput) {
                        e.preventDefault();

                        Swal.fire({
                            icon: 'error',
                            title: 'Lỗi',
                            text: 'Vui lòng chọn số lượng và size hợp lệ!'
                        });
                    }
                });
            }
        });
    </script>
}